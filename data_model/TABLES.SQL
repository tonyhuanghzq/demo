-- customer
CREATE TABLE CUSTOMER 
(
	CUSTOMER_NUMBER		INTEGER,
	CUSTOMER_NAME		VARCHAR(60),
	HOME_COUNTRY		VARCHAR(3),
	BOOKING_ENTITY      VARCHAR(3),
	RM_CODE             VARCHAR(6), -- FK
	DATE_OF_BIRTH       DATE
PRIMARY KEY (CUSTOMER_NUMBER)
)
@

--customer's account
CREATE TABLE ACCOUNT 
(
	CUSTOMER_NUMBER		INTEGER,
	ACCOUNT_NUMBER		INTEGER,
	ACCOUNT_NAME		VARCHAR(60),
	ACCOUNT_TYPE		VARCHAR(10)
PRIMARY KEY (CUSTOMER_NUMBER, ACCOUNT_NUMBER)
)
@

-- RM information
CREATE TABLE RELATIONSHIP_MANAGER
(
	RM_CODE 			VARCHAR(6),
	RM_NAME				VARCHAR(60),
	PHONE_NUMBER		VARCHAR(60),
	EMAIL_ADDRESS		VARCHAR(60),
	HOME_COUNTRY		VARCHAR(3),
	TEAM_CODE           VARCHAR(6) -- FK
PRIMARY KEY (RM_CODE)	
)
@

-- TEAM information
CREATE TABLE TEAM
(
	TEAM_CODE			VARCHAR(6),
	TEAM_NAME			VARCHAR(60),
	BOOKING_ENTITY		VARCHAR(3),
PRIMARY KEY(TEAM_CODE)
)
@

--SHARE ISSUE
CREATE TABLE SHARE_ISSUE
(
	SHARE_ISSUE_CODE	VARCHAR(20),
	SHARE_ISSUE_NAME	VARCHAR(200),
	SHARE_COUNTRY		VARCHAR(3),
	ISSUER_CODE			VARCHAR(30), --FK
	SHARE_PRICE			DECIMAL(10,2),
	SHARE_CURRENCY		VARCHAR(3),
	RISK_LEVEL			INTEGER,
PRIMARY KEY(SHARE_ISSUE_CODE)	
)

-- issuer (link to share issue, bond issue, structure product issue)
CREATE TABLE ISSUER
(
	ISSUER_CODE			VARCHAR(20),
	ISSUER_NAME			VARCHAR(200),
	DOMICILE_COUNTRY	VARCHAR(3),
	INDUSTRY_SECTOR		VARCHAR(20),
PRIMARY KEY(SHARE_ISSUER_CODE)
)
@

-- share_deal
CREATE TABLE SHARE_DEAL
(
	DEAL_NUMBER				INTEGER,
	CUSTOMER_NUMBER			INTEGER,
	ACCOUNT_NUMBER			INTEGER,
	SHARE_ISSUE_CODE		VARCHAR(20),
	TRANSACTION_TYPE		CHAR(1),
	SHARE_CURRENCY			VARCHAR(3),
	SHARE_PRICE				DECIMAL(10,2),
	SHARE_QUANTITY			DECIMAL(15,2),
	CONSIDERATION_AMOUNT	DECIMAL(15,2),
	TRADE_DATE				DATE,
	VALUE_DATE				DATE,
PRIMARY KEY (DEAL_NUMBER, CUSTOMER_NUMBER, ACCOUNT_NUMBER)
)
@

-- share_position
CREATE TABLE SHARE_POSITION
(
	CUSTOMER_NUMBER		INTEGER,
	ACCOUNT_NUMBER		INTEGER,
	SHARE_ISSUE_CODE	VARCHAR(20),
	SHARE_CURRENCY		VARCHAR(3),
	AVERAGE_PRICE		DECIMAL(10,2),
	HOLDING_QUANTITY	DECIMAL(15,2),
	CONSIDERATION_AMOUNT	DECIMAL(15,2)
PRIMARY KEY (CUSTOMER_NUMBER, ACCOUNT_NUMBER, SHARE_ISSUE_CODE)
)
@


-- bond_issue
CREATE TABLE BOND_ISSUE
(
	BOND_ISSUE_CODE		VARCHAR(20),
	BOND_ISSUE_NAME		VARCHAR(200),
	BOND_COUNTRY		VARCHAR(3),
	ISSUER_CODE			VARCHAR(30), --FK
	ISSUE_DATE			DATE,
	BOND_PRICE			DECIMAL(10,2),
	BOND_CURRENCY		VARCHAR(3),			
	BOND_MATURITY_DATE	DATE,
	BOND_YIELD			DECIMAL(13,9),
	COUPON_RATE			DECIMAL(9,5),
	RISK_LEVEL			INTEGER,
PRIMARY KEY(SHARE_ISSUE_CODE)	
)

-- bond_deal
CREATE TABLE BOND_DEAL
(
	DEAL_NUMBER				INTEGER,
	CUSTOMER_NUMBER			INTEGER,
	ACCOUNT_NUMBER			INTEGER,
	BOND_ISSUE_CODE			VARCHAR(20),
	TRANSACTION_TYPE		CHAR(1),
	BOND_CURRENCY			VARCHAR(3),
	BOND_PRICE				DECIMAL(10,2),
	BOND_QUANTITY			DECIMAL(15,2),
	CONSIDERATION_AMOUNT	DECIMAL(15,2),
	TRADE_DATE				DATE,
	VALUE_DATE				DATE,
)

-- bond_position
CREATE TABLE BOND_POSITION
(
	CUSTOMER_NUMBER		INTEGER,
	ACCOUNT_NUMBER		INTEGER,
	BOND_ISSUE_CODE		VARCHAR(20),
	BOND_CURRENCY		VARCHAR(3),
	ACCRUED_INTEREST	DECIMAL(15,4)
	AVERAGE_PRICE		DECIMAL(10,2),
	HOLDING_QUANTITY	DECIMAL(15,2),
	CONSIDERATION_AMOUNT	DECIMAL(15,2)
PRIMARY KEY (CUSTOMER_NUMBER, ACCOUNT_NUMBER, SHARE_ISSUE_CODE)
)
@

structure_product_issue

SP_deal

SP_position
